<!DOCTYPE html>
<html style="position: relative; transition: right 0.25s ease-in-out 0s; right: 0px;" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><script src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/rapid-3.js"></script><script src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/quant.js"></script><script src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/ga.js" async="" type="text/javascript"></script><script>var __pbpa = true;</script><script>var translated_warning_string = 'Warning: Never enter your Tumblr password unless \u201chttps://www.tumblr.com/login\u201d\x0ais the address in your web browser.\x0a\x0aYou should also see a green \u201cTumblr, Inc.\u201d identification in the address bar.\x0a\x0aSpammers and other bad guys use fake forms to steal passwords.\x0a\x0aTumblr will never ask you to log in from a user\u2019s blog.\x0a\x0aAre you absolutely sure you want to continue?';</script><script type="text/javascript" language="javascript" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/pre_tumblelog.js"></script>



    <title>GameInternals - Understanding Pac-Man Ghost Behavior</title>
    <meta name="description" content="Understanding Pac-Man Ghost Behavior It only seems right for me to begin this blog with the topic that inspired me to start it in the first place. Not too long ago, I came across Jamey Pittman’s...">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://gameinternals.com/rss">
    <style type="text/css">
    body
    {
        background: #3f3f3f;
        color: #dcdccc;
        font-family: Georgia, serif;
        font-size: 17px;
    }
    
    a
    {
        color: #8cd0d3;
        text-decoration: none;
    }
    
    a:hover
    {
        text-decoration: underline;
    }
    
    div.clear
    {
        clear: both;
    }
    
    div#wrapper
    {
        margin: 0 auto;
        width: 775px;
    }
    
    div#top-menu
    {
        border-bottom: 1px solid #464646;
    }
    
    div#top-menu div.top-menu-item
    {
        float: right;
        padding: 16px 10px;
    }
    
    div#top-menu a
    {
        color: #a0a0a0;
        font-style: italic;
    }
    
    div#top-menu a:hover
    {
        color: #fff;
        text-decoration: none;
    }
    
    div#title
    {
        color: #b7b7b7;
        font-size: 72px;
        font-style: italic;
        letter-spacing: -3px;
    }
    
    div#title a
    {
        color: inherit;
    }
    
    div#title a:hover
    {
        text-decoration: none;
    }
    
    div#subtitle
    {
        margin-left: 205px;
        margin-top: -16px;
        color: #bbb;
        font-size: 22px;
        font-style: italic;
        letter-spacing: -1px;
    }
    
    div#description
    {
        margin-top: 32px;
        padding: 18px 24px;
        background: #474747;
        color: #fff;
        font-size: 12px;
        line-height: 17px;
        text-align: justify;
    }
    
    div.post
    {
        margin-top: 20px;
        padding: 20px 0;
        border-top: #494949 solid 4px;
        line-height: 27px;
    }
    
    h1
    {
        margin: 0;
        font-size: 36px;
        line-height: 36px;
        font-weight: normal;
        font-style: italic;
        letter-spacing: -1px;
    }
    
    div.post h2, div.post h3 {
        clear: both;
        border-bottom: 1px solid #555;
        margin-bottom: 0px;
        padding-bottom: 6px;
    }

    div.post h3 {
        border-bottom: none;
    }
    
    div.post_date
    {
        color: #aaa;
        font-style: italic;
    }
    
    div.post p
    {
        margin-top: 10px;
    }
    
    div.post code
    {
        display: block;
        background: #313131;
        font-family: Consolas, 'Lucida Console', monospace;
        margin-left: 20px;
        margin-right: 20px;
        padding: 10px;
        border: solid #515151;
        border-width: 1px 1px 1px 8px;
    }
    
    div.post blockquote
    {
        font-style: italic;
        margin-left: 20px;
        margin-right: 20px;
        padding-left: 16px;
        text-indent: -6px;
        border-left: 1px dotted;
    }
    
    div.post blockquote div.quote-source
    {
        margin-left: 50px;
    }

    div.post img
    {
        border: 1px solid #666;
        margin: 8px 20px;
        padding: 2px;
    }

    div.post img.right
    {
        float: right;
        clear: right;
        margin-right: 0;
    }

    div.post img.left
    {
        float: left;
        clear: left;
        margin-left: 0;
    }

    div.post img.center
    {
        display: block;
        clear: both;
        margin: 8px auto;
    }

    div#footer
    {
        clear: both;
        margin-top: 8px;
        margin-bottom: 16px;
        padding: 8px 20px;
        border-top: 1px solid #555;
    }

    div#footer div.next
    {
        float: right;
    }

    div#footer div.previous
    {
        float: left;
    }
    
    </style>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-19316241-1']);
        _gaq.push(['_trackPageview']);
        
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
<link rel="alternate" href="android-app://com.tumblr/tumblr/x-callback-url/blog?blogName=gameinternals&amp;postID=2072558330">

<!-- BEGIN TUMBLR FACEBOOK OPENGRAPH TAGS --><!-- If you'd like to specify your own Open Graph tags, define the og:url and og:title tags in your theme's HTML. --><!-- Read more: http://ogp.me/ --><meta property="fb:app_id" content="48119224995"><meta property="og:site_name" content=""><meta property="og:title" content="Understanding Pac-Man Ghost Behavior"><meta property="og:url" content="http://gameinternals.com/post/2072558330/understanding-pac-man-ghost-behavior"><meta property="og:description" content="It only seems right for me to begin this blog with the topic that inspired me to start it in the first place. Not too long ago, I came across Jamey Pittman’s “Pac-Man Dossier”, which is a..."><meta property="og:determiner" content="a"><meta property="og:type" content="tumblr-feed:entry"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/initial-playfield.png"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/tiled-playfield.png"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/intersection-map.png"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/decision.png"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/bad-decision.png"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/ghost-names.png"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/scatter-targets.png"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/blinky-targeting.png"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/pinky-targeting.png"><meta property="og:image" content="http://media.gameinternals.com/pacman-ghosts/pinky-targeting2.png"><meta property="al:ios:url" content="tumblr://x-callback-url/blog?blogName=gameinternals&amp;postID=2072558330"><meta property="al:ios:app_name" content="Tumblr"><meta property="al:ios:app_store_id" content="305343404"><meta property="al:android:url" content="tumblr://x-callback-url/blog?blogName=gameinternals&amp;postID=2072558330"><meta property="al:android:app_name" content="Tumblr"><meta property="al:android:package" content="com.tumblr"><!-- END TUMBLR FACEBOOK OPENGRAPH TAGS -->


<!-- TWITTER TAGS --><meta charset="utf-8"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="It only seems right for me to begin this blog with the topic that inspired me to start it in the first place. Not too long ago, I came across Jamey Pittman&amp;#8217;s &amp;#8220;Pac-Man Dossier&amp;#8221;, which is a ridiculously-detailed explanation of the mechanics of Pac-Man. I found it absolutely fascinating, so this site is my attempt to discover and aggregate similarly-detailed information about other games (albeit in much smaller chunks). However, as a bit of a tribute, I&amp;#8217;m going to start with Pac-Man as well, specifically the ghost AI. It&amp;#8217;s an interesting topic, and hopefully my explanation will be a bit more accessible than Jamey&amp;#8217;s, due to focusing on only the information relevant to ghost behavior.

About the Game


&amp;#8220;All the computer games available at the time were of the violent type - war games and space invader types. There were no games that everyone could enjoy, and especially none for women. I wanted to come up with a &amp;#8220;comical&amp;#8221; game women could enjoy.&amp;#8221;
- Toru Iwatani, Pac-Man creator


 Pac-Man is one of the most iconic video games of all time, and most people (even non-gamers) have at least a passing familiarity with it. The purpose of the game is very simple — the player is placed in a maze filled with food (depicted as pellets or dots) and needs to eat all of it to advance to the next level. This task is made difficult by four ghosts that pursue Pac-Man through the maze. If Pac-Man makes contact with any of the ghosts, the player loses a life and the positions of Pac-Man and the ghosts are reset back to their starting locations, though any dots that were eaten remain so. Other than simply avoiding them, Pac-Man&amp;#8217;s only defense against the ghosts are the four larger &amp;#8220;energizer&amp;#8221; pellets located at the corners of the maze. Eating one causes the ghosts to become frightened and retreat for a short time, and in the early levels of the game Pac-Man can even eat the ghosts for bonus points during this period. An eaten ghost is not completely eliminated, but is returned to its starting position before resuming its pursuit. Other than eating dots and ghosts, the only other source of points are the two pieces of fruit which appear during each level near the middle of the maze. The first fruit appears when Pac-Man has eaten 70 of the dots in the maze, and the second when 170 have been eaten.

 Every level of Pac-Man uses the same maze layout, containing 240 regular &amp;#8220;food&amp;#8221; dots and 4 energizers. The tunnels that lead off of the left and right edges of the screen act as shortcuts to the opposite side of the screen, and are usable by both Pac-Man and the ghosts, though the ghosts&amp;#8217; speed is greatly reduced while they are in the tunnel. Even though the layout is always the same, the levels become increasingly difficult due to modifications to Pac-Man&amp;#8217;s speed, as well as changes to both the speed and behavior of the ghosts. After reaching level 21, no further changes to the game&amp;#8217;s mechanics are made, and every level from 21 onwards is effectively identical.

Common Elements of Ghost Behaviour


&amp;#8220;Well, there&amp;#8217;s not much entertainment in a game of eating, so we decided to create enemies to inject a little excitement and tension. The player had to fight the enemies to get the food. And each of the enemies has its own character. The enemies are four little ghost-shaped monsters, each of them a different colour - blue, yellow, pink and red. I used four different colours mostly to please the women who play - I thought they would like the pretty colours.&amp;#8221;
- Toru Iwatani, Pac-Man creator


 Each of the ghosts is programmed with an individual &amp;#8220;personality&amp;#8221;, a different algorithm it uses to determine its method of moving through the maze. Understanding how each ghost behaves is extremely important to be able to effectively avoid them. However, before discussing their individual behaviors, let&amp;#8217;s first examine the logic that they share.

The Ghost House

 When a player begins a game of Pac-Man, they are not immediately attacked by all four of the ghosts. As shown on the diagram of the initial game position, only one ghost begins in the actual maze, while the others are inside a small area in the middle of the maze, often referred to as the &amp;#8220;ghost house&amp;#8221;. Other than at the beginning of a level, the ghosts will only return to this area if they are eaten by an energized Pac-Man, or as a result of their positions being reset when Pac-Man dies. The ghost house is otherwise inaccessible, and is not a valid area for Pac-Man or the ghosts to move into. Ghosts always move to the left as soon as they leave the ghost house, but they may reverse direction almost immediately due to an effect that will be described later.

 The conditions that determine when the three ghosts that start inside the ghost house are able to leave it are actually fairly complex. Because of this, I&amp;#8217;m going to consider them outside the scope of this article, especially since they become much less relevant after completing the first few levels. If you&amp;#8217;re interested in reading about these rules (and an interesting exploit of them), the Pac-Man Dossier covers them in-depth, as always.

Target Tiles

 Much of Pac-Man&amp;#8217;s design and mechanics revolve around the idea of the board being split into tiles. &amp;#8220;Tile&amp;#8221; in this context refers to an 8 x 8 pixel square on the screen. Pac-Man&amp;#8217;s screen resolution is 224 x 288, so this gives us a total board size of 28 x 36 tiles, though most of these are not accessible to Pac-Man or the ghosts. As an example of the impact of tiles, a ghost is considered to have caught Pac-Man when it occupies the same tile as him. In addition, every pellet in the maze is in the center of its own tile. It should be noted that since the sprites for Pac-Man and the ghosts are larger than one tile in size, they are never completely contained in a single tile. Due to this, for the game&amp;#8217;s purposes, the character is considered to occupy whichever tile contains its center point. This is important knowledge when avoiding ghosts, since Pac-Man will only be caught if a ghost manages to move its center point into the same tile as Pac-Man&amp;#8217;s.

 The key to understanding ghost behavior is the concept of a target tile. The large majority of the time, each ghost has a specific tile that it is trying to reach, and its behavior revolves around trying to get to that tile from its current one. All of the ghosts use identical methods to travel towards their targets, but the different ghost personalities come about due to the individual way each ghost has of selecting its target tile. Note that there are no restrictions that a target tile must actually be possible to reach, they can (and often are) located on an inaccessible tile, and many of the common ghost behaviors are a direct result of this possibility. Target tiles will be discussed in more detail in upcoming sections, but for now just keep in mind that the ghosts are almost always motivated by trying to reach a particular tile.

Ghost Movement Modes

 The ghosts are always in one of three possible modes: Chase, Scatter, or Frightened. The &amp;#8220;normal&amp;#8221; mode with the ghosts pursuing Pac-Man is Chase, and this is the one that they spend most of their time in. While in Chase mode, all of the ghosts use Pac-Man&amp;#8217;s position as a factor in selecting their target tile, though it is more significant to some ghosts than others. In Scatter mode, each ghost has a fixed target tile, each of which is located just outside a different corner of the maze. This causes the four ghosts to disperse to the corners whenever they are in this mode. Frightened mode is unique because the ghosts do not have a specific target tile while in this mode. Instead, they pseudorandomly decide which turns to make at every intersection. A ghost in Frightened mode also turns dark blue, moves much more slowly and can be eaten by Pac-Man. However, the duration of Frightened mode is shortened as the player progresses through the levels, and is completely eliminated from level 19 onwards.


&amp;#8220;To give the game some tension, I wanted the monsters to surround Pac Man at some stage of the game. But I felt it would be too stressful for a human being like Pac Man to be continually surrounded and hunted down. So I created the monsters&amp;#8217; invasions to come in waves. They&amp;#8217;d attack and then they&amp;#8217;d retreat. As time went by they would regroup, attack, and disperse again. It seemed more natural than having constant attack.&amp;#8221;
- Toru Iwatani, Pac-Man creator


 Changes between Chase and Scatter modes occur on a fixed timer, which causes the &amp;#8220;wave&amp;#8221; effect described by Iwatani. This timer is reset at the beginning of each level and whenever a life is lost. The timer is also paused while the ghosts are in Frightened mode, which occurs whenever Pac-Man eats an energizer. When Frightened mode ends, the ghosts return to their previous mode, and the timer resumes where it left off. The ghosts start out in Scatter mode, and there are four waves of Scatter/Chase alternation defined, after which the ghosts will remain in Chase mode indefinitely (until the timer is reset). For the first level, the durations of these phases are:

 Scatter for 7 seconds, then Chase for 20 seconds.
    Scatter for 7 seconds, then Chase for 20 seconds.
    Scatter for 5 seconds, then Chase for 20 seconds.
    Scatter for 5 seconds, then switch to Chase mode permanently.
 The durations of these phases are changed somewhat when the player reaches level 2, and once again when they reach level 5. Starting on level 2, the third Chase mode lengthens considerably, to 1033 seconds (17 minutes and 13 seconds), and the following Scatter mode lasts just 1/60 of a second before the ghosts proceed to their permanent Chase mode. The level 5 changes build on top of this, additionally reducing the first two Scatter lengths to 5 seconds, and adding the 4 seconds gained here to the third Chase mode, lengthening it to 1037 seconds (17:17). Regarding the 1/60-of-a-second Scatter mode on every level except the first, even though it may seem that switching modes for such an insignificant amount of time is pointless, there is a reason behind it, which shall be revealed shortly.

Basic Ghost Movement Rules

 The next step is understanding exactly how the ghosts attempt to reach their target tiles. The ghosts&amp;#8217; AI is very simple and short-sighted, which makes the complex behavior of the ghosts even more impressive. Ghosts only ever plan one step into the future as they move about the maze. Whenever a ghost enters a new tile, it looks ahead to the next tile that it will reach, and makes a decision about which direction it will turn when it gets there. These decisions have one very important restriction, which is that ghosts may never choose to reverse their direction of travel. That is, a ghost cannot enter a tile from the left side and then decide to reverse direction and move back to the left. The implication of this restriction is that whenever a ghost enters a tile with only two exits, it will always continue in the same direction.

 However, there is one exception to this rule, which is that whenever ghosts change from Chase or Scatter to any other mode, they are forced to reverse direction as soon as they enter the next tile. This forced instruction will overwrite whatever decision the ghosts had previously made about the direction to move when they reach that tile. This effectively acts as a notifier to the player that the ghosts have changed modes, since it is the only time a ghost can possibly reverse direction. Note that when the ghosts leave Frightened mode they do not change direction, but this particular switch is already obvious due to the ghosts reverting to their regular colors from the dark blue of Frightened. So then, the 1/60-of-a-second Scatter mode on every level after the first will cause all the ghosts to reverse their direction of travel, even though their target effectively remains the same. This forced direction-reversal instruction is also applied to any ghosts still inside the ghost house, so a ghost that hasn&amp;#8217;t yet entered the maze by the time the first mode switch occurs will exit the ghost house with a &amp;#8220;reverse direction as soon as you can&amp;#8221; instruction already pending. This causes them to move left as usual for a very short time, but they will almost immediately reverse direction and go to the right instead.

 The diagram above shows a simplified representation of the maze layout. Decisions are only necessary at all when approaching &amp;#8220;intersection&amp;#8221; tiles, which are indicated in green on the diagram.

 When a decision about which direction to turn is necessary, the choice is made based on which tile adjoining the intersection will put the ghost nearest to its target tile, measured in a straight line. The distance from every possibility to the target tile is measured, and whichever tile is closest to the target will be selected. In the diagram to the left, the ghost will turn upwards at the intersection. If two or more potential choices are an equal distance from the target, the decision between them is made in the order of up &amp;gt; left &amp;gt; down. A decision to exit right can never be made in a situation where two tiles are equidistant to the target, since any other option has a higher priority.

 Since the only consideration is which tile will immediately place the ghost closer to its target, this can result in the ghosts selecting the &amp;#8220;wrong&amp;#8221; turn when the initial choice places them closer, but the overall path is longer. An example is shown to the right, where straight-line measurement makes exiting left appear to be a better choice. However, this will result in an overall path length of 26 tiles to reach the target, when exiting right would have had a path only 8 tiles long. 

 One final special case to be aware of are the four intersections that were colored yellow on the simplified maze diagram. These specific intersections have an extra restriction — ghosts can not choose to turn upwards from these tiles. If entering them from the right or left side they will always proceed out the opposite side (excepting a forced direction-reversal). Note that this restriction does not apply to Frightened mode, and Frightened ghosts may turn upwards here if that decision occurs randomly. A ghost entering these tiles from the top can also reverse direction back out the top if a mode switch occurs as they are entering the tile, the restriction is only applied during &amp;#8220;regular&amp;#8221; decision-making. If Pac-Man is being pursued closely by ghosts, he can gain some ground on them by making an upwards turn in one of these intersections, since they will be forced to take a longer route around.

Individual Ghost Personalities


&amp;#8220;This is the heart of the game. I wanted each ghostly enemy to have a specific character and its own particular movements, so they weren&amp;#8217;t all just chasing after Pac Man in single file, which would have been tiresome and flat.&amp;#8221; 
- Toru Iwatani, Pac-Man creator


 As has been previously mentioned, the only differences between the ghosts are their methods of selecting target tiles in Chase and Scatter modes. The only official description of each ghost&amp;#8217;s personality comes from the one-word &amp;#8220;character&amp;#8221; description shown in the game&amp;#8217;s attract mode. We&amp;#8217;ll first take a look at how the ghosts behave in Scatter mode, since it&amp;#8217;s extremely straightforward, and then look at each ghost&amp;#8217;s approach to targeting in Chase mode.

Scatter Mode

 Each ghost has a pre-defined, fixed target tile while in this mode, located just outside the corners of the maze. When Scatter mode begins, each ghost will head towards their &amp;#8220;home&amp;#8221; corner using their regular path-finding methods. However, since the actual target tiles are inaccessible and the ghosts cannot stop moving or reverse direction, they are forced to continue past the target, but will turn back towards it as soon as possible. This results in each ghost&amp;#8217;s path eventually becoming a fixed loop in their corner. If left in Scatter mode, each ghost would remain in its loop indefinitely. In practice, the duration of Scatter mode is always quite short, so the ghosts often do not have time to even reach their corner or complete a circuit of their loop before reverting back to Chase mode. The diagram shows each ghost&amp;#8217;s target tile and eventual looping path, color-coded to match their own color.

The Red Ghost

 The red ghost starts outside of the ghost house, and is usually the first one to be seen as a threat, since he makes a beeline for Pac-Man almost immediately. He is referred to as &amp;#8220;Blinky&amp;#8221;, and the game describes his personality as shadow. In Japanese, his personality is referred to as 追いかけ, oikake, which translates as &amp;#8220;pursuer&amp;#8221; or &amp;#8220;chaser&amp;#8221;. Both languages&amp;#8217; descriptions are accurate, since Blinky&amp;#8217;s target tile in Chase mode is defined as Pac-Man&amp;#8217;s current tile. This ensures that Blinky almost always follows directly behind Pac-Man, unless the short-sighted decision-making causes him to take an inefficient path.

 Even though Blinky&amp;#8217;s targeting method is very simple, he does have one idiosyncrasy that the other ghosts do not; at two defined points in each level (based on the number of dots remaining), his speed increases by 5% and his behavior in Scatter mode changes. The timing of the speed change varies based on the level, with the change occurring earlier and earlier as the player progresses. The change to Scatter targeting is perhaps more significant than the speed increases, since it causes Blinky&amp;#8217;s target tile to remain as Pac-Man&amp;#8217;s position even while in Scatter mode, instead of his regular fixed tile in the upper-right corner. This effectively keeps Blinky in Chase mode permanently, though he will still be forced to reverse direction as a result of a mode switch. When in this enhanced state, Blinky is generally referred to as &amp;#8220;Cruise Elroy&amp;#8221;, though the origin of this term seems to be unknown. Not even the almighty Pac-Man Dossier has an answer here. If Pac-Man dies while Blinky is in Cruise Elroy mode, he reverts back to normal behavior temporarily, but returns to Elroy mode as soon as all other ghosts have exited the ghost house.

The Pink Ghost

 The pink ghost starts inside the ghost house, but always exits immediately, even in the first level. His nickname is &amp;#8220;Pinky&amp;#8221;, and his personality is described as speedy. This is a considerable departure from his Japanese personality description, which is 待ち伏せ, machibuse, which translates as &amp;#8220;ambusher&amp;#8221;. The Japanese version is much more appropriate, since Pinky does not move faster than any of the other ghosts (and slower than Blinky in Cruise Elroy mode), but his targeting scheme attempts to move him to the place where Pac-Man is going, instead of where he currently is. Pinky&amp;#8217;s target tile in Chase mode is determined by looking at Pac-Man&amp;#8217;s current position and orientation, and selecting the location four tiles straight ahead of Pac-Man. At least, this was the intention, and it works when Pac-Man is facing to the left, down, or right, but when Pac-Man is facing upwards, an overflow error in the game&amp;#8217;s code causes Pinky&amp;#8217;s target tile to actually be set as four tiles ahead of Pac-Man and four tiles to the left of him. I don&amp;#8217;t wish to frighten off non-programmers, but if you&amp;#8217;re interested in the technical details behind this bug, Don Hodges has written a great explanation (Google cache link, since the traffic keeps killing his server), including the actual assembly code for Pinky&amp;#8217;s targeting, as well as a fixed version.

 One important implication of Pinky&amp;#8217;s targeting method is that Pac-Man can often win a game of &amp;#8220;chicken&amp;#8221; with him. Since his target tile is set four tiles in front of Pac-Man, if Pac-Man heads directly towards him, Pinky&amp;#8217;s target tile will actually be behind himself once they are less than four tiles apart. This will cause Pinky to choose to take any available turn-off in order to loop back around to his target. Because of this, it is a common strategy to momentarily &amp;#8220;fake&amp;#8221; back towards Pinky if he starts following closely. This will often send him off in an entirely different direction.

The Blue Ghost

 The blue ghost is nicknamed Inky, and remains inside the ghost house for a short time on the first level, not joining the chase until Pac-Man has managed to consume at least 30 of the dots. His English personality description is bashful, while in Japanese he is referred to as 気紛れ, kimagure, or &amp;#8220;whimsical&amp;#8221;. Inky is difficult to predict, because he is the only one of the ghosts that uses a factor other than Pac-Man&amp;#8217;s position/orientation when determining his target tile. Inky actually uses both Pac-Man&amp;#8217;s position/facing as well as Blinky&amp;#8217;s (the red ghost&amp;#8217;s) position in his calculation. To locate Inky&amp;#8217;s target, we first start by selecting the position two tiles in front of Pac-Man in his current direction of travel, similar to Pinky&amp;#8217;s targeting method. From there, imagine drawing a vector from Blinky&amp;#8217;s position to this tile, and then doubling the length of the vector. The tile that this new, extended vector ends on will be Inky&amp;#8217;s actual target.

 As a result, Inky&amp;#8217;s target can vary wildly when Blinky is not near Pac-Man, but if Blinky is in close pursuit, Inky generally will be as well. Note that Inky&amp;#8217;s &amp;#8220;two tiles in front of Pac-Man&amp;#8221; calculation suffers from exactly the same overflow error as Pinky&amp;#8217;s four-tile equivalent, so if Pac-Man is heading upwards, the endpoint of the initial vector from Blinky (before doubling) will actually be two tiles up and two tiles left of Pac-Man.

The Orange Ghost

 The orange ghost, &amp;#8220;Clyde&amp;#8221;, is the last to leave the ghost house, and does not exit at all in the first level until over a third of the dots have been eaten. Clyde&amp;#8217;s English personality description is pokey, whereas the Japanese description is お惚け, otoboke or &amp;#8220;feigning ignorance&amp;#8221;. As is typical, the Japanese version is more accurate, since Clyde&amp;#8217;s targeting method can give the impression that he is just &amp;#8220;doing his own thing&amp;#8221;, without concerning himself with Pac-Man at all. The unique feature of Clyde&amp;#8217;s targeting is that it has two separate modes which he constantly switches back and forth between, based on his proximity to Pac-Man. Whenever Clyde needs to determine his target tile, he first calculates his distance from Pac-Man. If he is farther than eight tiles away, his targeting is identical to Blinky&amp;#8217;s, using Pac-Man&amp;#8217;s current tile as his target. However, as soon as his distance to Pac-Man becomes less than eight tiles, Clyde&amp;#8217;s target is set to the same tile as his fixed one in Scatter mode, just outside the bottom-left corner of the maze.

 The combination of these two methods has the overall effect of Clyde alternating between coming directly towards Pac-Man, and then changing his mind and heading back to his corner whenever he gets too close. On the diagram above, the X marks on the path represent the points where Clyde&amp;#8217;s mode switches. If Pac-Man somehow managed to remain stationary in that position, Clyde would indefinitely loop around that T-shaped area. As long as the player is not in the lower-left corner of the maze, Clyde can be avoided completely by simply ensuring that you do not block his &amp;#8220;escape route&amp;#8221; back to his corner. While Pac-Man is within eight tiles of the lower-left corner, Clyde&amp;#8217;s path will end up in exactly the same loop as he would eventually maintain in Scatter mode.

Wrapping Up

 If you&amp;#8217;ve made it this far, you should now have a fairly complete understanding of the logic behind Pac-Man&amp;#8217;s ghost movement. Understanding the ghosts&amp;#8217; behavior is probably the single most important step towards becoming a skilled Pac-Man player, and even a general idea of where they are likely to move next should greatly improve your abilities. I&amp;#8217;ve never been good at Pac-Man, but while I was researching this article and testing a few things, I found that I was able to avoid the ghosts much more easily than before. Even small things make a huge difference, such as recognizing a switch to Scatter mode and knowing that you have a few seconds where the ghosts won&amp;#8217;t (deliberately) try to kill you.

 Pac-Man is an amazing example of seemingly-complex behavior arising from only a few cleverly-designed rules, with the result being a deep and challenging game that players still strive to master, 30 years after its release.

Sources
 The Pac-Man Dossier, Jamey Pittman - practically the only source you need for anything related to Pac-Man. I did some original research to confirm a few statements here and there, but honestly, most of this article is just rearranged and reworded from Jamey&amp;#8217;s amazing work on the Dossier. Highly recommended reading if you enjoyed this article and would like to learn about the other aspects of the game.
    Pac-Man&amp;#8217;s Ghost Behaviour Analyzed and Fixed, Don Hodges - explanation of Pinky and Inky&amp;#8217;s targeting bug and some of the relevant Z80 assembly code.
    All Toru Iwatani quotes come from an interview in Programmers at Work by Susan M. Lammers. The entire interview is available online at Pac-Man Museum.
"><meta name="twitter:title" content="Understanding Pac-Man Ghost Behavior"><meta name="twitter:url" content="http://gameinternals.com/post/2072558330/understanding-pac-man-ghost-behavior"><meta name="twitter:site" content="tumblr"><meta name="twitter:app:name:iphone" content="Tumblr"><meta name="twitter:app:name:ipad" content="Tumblr"><meta name="twitter:app:name:googleplay" content="Tumblr"><meta name="twitter:app:id:iphone" content="305343404"><meta name="twitter:app:id:ipad" content="305343404"><meta name="twitter:app:id:googleplay" content="com.tumblr"><meta name="twitter:app:url:iphone" content="tumblr://x-callback-url/blog?blogName=gameinternals&amp;postID=2072558330&amp;referrer=twitter-cards"><meta name="twitter:app:url:ipad" content="tumblr://x-callback-url/blog?blogName=gameinternals&amp;postID=2072558330&amp;referrer=twitter-cards"><meta name="twitter:app:url:googleplay" content="tumblr://x-callback-url/blog?blogName=gameinternals&amp;postID=2072558330&amp;referrer=twitter-cards">

<script src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/tumblelog.js"></script><style id="tumblr_teaser_follow_css" type="text/css">
#tumblr_teaser_follow {
display: block;
opacity: 1;
visibility: hidden;
position: fixed;
bottom: 0px;
right: 0px;
width: 1px;
height: 1px;
z-index: 2147483647;
}
#tumblr_teaser_follow.open {
visibility: visible;
width: 310px;
height: 106px;
}
</style><style id="tumblr_iframe_css" type="text/css">
.tumblr_controls {
position: absolute;
top: 0px;
right: 0px;
display: block;
opacity: 1;
width: 1px;
height: 1px;
z-index: 2147483647;
visibility: hidden;
pointer-events: none;
}
.tumblr_controls.visible {
visibility: visible;
pointer-events: all;
}
.tumblr_controls.sticky {
position: fixed;
}
.tumblr_controls.transition {
-webkit-transition: top 0.1s ease;
-moz-transition: top 0.1s ease;
-ms-transition: top 0.1s ease;
-o-transition: top 0.1s ease;
transition: top 0.1s ease;
}
iframe#tumblr_controls.tumblr_controls.sticky.transition {
-webkit-animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
-moz-animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
-ms-animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
-o-animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
top: 0 !important;
}
.tumblr_controls.sticky.transition {
-webkit-animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
-moz-animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
-ms-animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
-o-animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
animation: tumblr_controls_fade_in 0.3s 0.2s linear 1 both;
top: 0 !important;
}
.tumblr_controls.flash_fix {
visibility: hidden !important;
}
#tumblr_controls {
width: 328px;
height: 36px;
}
@-webkit-keyframes tumblr_controls_fade_in {
0% {
opacity: 0;
}
100% {
opacity: 1;
}
}
@-moz-keyframes tumblr_controls_fade_in {
0% {
opacity: 0;
}
100% {
opacity: 1;
}
}
@-ms-keyframes tumblr_controls_fade_in {
0% {
opacity: 0;
}
100% {
opacity: 1;
}
}
@-o-keyframes tumblr_controls_fade_in {
0% {
opacity: 0;
}
100% {
opacity: 1;
}
}
@keyframes tumblr_controls_fade_in {
0% {
opacity: 0;
}
100% {
opacity: 1;
}
}
</style>
<link rel="stylesheet" type="text/css" href="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/stylesheet.css">
<meta http-equiv="x-dns-prefetch-control" content="off">
</head>
<body>
<div id="wrapper">

<div id="top-menu">
    <div class="top-menu-item"><a href="http://gameinternals.com/archive">Archive</a></div>
    <div class="top-menu-item"><a href="http://gameinternals.com/rss">RSS Feed</a></div>
    <div class="clear"></div>
</div>

<div id="header">
    <div id="title"><a href="http://gameinternals.com/">Game<span style="color:#fff">Internals</span></a></div>
    <div id="subtitle">All theory, no practice</div>
    <div id="description">
        <p>GameInternals aims to spread knowledge of interesting game 
mechanics beyond the game-specific enthusiast communities. Each post 
focuses on a specific game mechanic that would normally only be known to
 high-level players of a particular game, and attempts to explain it in a
 manner that would be understandable even by readers unfamiliar with 
that game.</p>
        <p style="color: #c4c4c4">GameInternals articles are researched and written by <a href="mailto:chad@gameinternals.com">Chad Birch</a>, a gamer and programmer from Calgary, Alberta, Canada.</p>
        <p style="color: #c4c4c4">If you have any suggestions for games or mechanics that would make good article topics, please feel free to <a href="mailto:chad@gameinternals.com">email me</a>.</p>
    </div>
</div>


<div class="post">
    <h1><a href="http://gameinternals.com/post/2072558330/understanding-pac-man-ghost-behavior">Understanding Pac-Man Ghost Behavior</a></h1>
    <div class="post_date">Posted on December 2, 2010</div>
    <p>It only seems right for me to begin this blog with the topic that
 inspired me to start it in the first place. Not too long ago, I came 
across <a href="http://home.comcast.net/%7Ejpittman2/pacman/pacmandossier.html" target="_blank">Jamey Pittman’s “Pac-Man Dossier”</a>,
 which is a ridiculously-detailed explanation of the mechanics of 
Pac-Man. I found it absolutely fascinating, so this site is my attempt 
to discover and aggregate similarly-detailed information about other 
games (albeit in much smaller chunks). However, as a bit of a tribute, 
I’m going to start with Pac-Man as well, specifically the ghost AI. It’s
 an interesting topic, and hopefully my explanation will be a bit more 
accessible than Jamey’s, due to focusing on only the information 
relevant to ghost behavior.</p>

<h2>About the Game</h2>

<blockquote>
“All the computer games available at the time were of the violent type -
 war games and space invader types. There were no games that everyone 
could enjoy, and especially none for women. I wanted to come up with a 
“comical” game women could enjoy.”
<div class="quote-source">- Toru Iwatani, Pac-Man creator</div>
</blockquote>

<p>Pac-Man is one of the most iconic video games of all time, and most 
people (even non-gamers) have at least a passing familiarity with it. 
The purpose of the game is very simple — the player is placed in a maze 
filled with food (depicted as pellets or dots) and needs to eat all of 
it to advance to the next level. This task is made difficult by four 
ghosts that pursue Pac-Man through the maze. If Pac-Man makes contact 
with any of the ghosts, the player loses a life and the positions of 
Pac-Man and the ghosts are reset back to their starting locations, 
though any dots that were eaten remain so. Other than simply avoiding 
them, Pac-Man’s only defense against the ghosts are the four larger 
“energizer” pellets located at the corners of the maze. Eating one 
causes the ghosts to become frightened and retreat for a short time, and
 in the early levels of the game Pac-Man can even eat the ghosts for 
bonus points during this period. An eaten ghost is not completely 
eliminated, but is returned to its starting position before resuming its
 pursuit. Other than eating dots and ghosts, the only other source of 
points are the two pieces of fruit which appear during each level near 
the middle of the maze. The first fruit appears when Pac-Man has eaten 
70 of the dots in the maze, and the second when 170 have been eaten.</p>

<img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/initial-playfield.png"><p>Every
 level of Pac-Man uses the same maze layout, containing 240 regular 
“food” dots and 4 energizers. The tunnels that lead off of the left and 
right edges of the screen act as shortcuts to the opposite side of the 
screen, and are usable by both Pac-Man and the ghosts, though the 
ghosts’ speed is greatly reduced while they are in the tunnel. Even 
though the layout is always the same, the levels become increasingly 
difficult due to modifications to Pac-Man’s speed, as well as changes to
 both the speed and behavior of the ghosts. After reaching level 21, no 
further changes to the game’s mechanics are made, and every level from 
21 onwards is effectively identical.</p>

<h2>Common Elements of Ghost Behaviour</h2>

<blockquote>
“Well, there’s not much entertainment in a game of eating, so we decided
 to create enemies to inject a little excitement and tension. The player
 had to fight the enemies to get the food. And each of the enemies has 
its own character. The enemies are four little ghost-shaped monsters, 
each of them a different colour - blue, yellow, pink and red. I used 
four different colours mostly to please the women who play - I thought 
they would like the pretty colours.”
<div class="quote-source">- Toru Iwatani, Pac-Man creator</div>
</blockquote>

<p>Each of the ghosts is programmed with an individual “personality”, a 
different algorithm it uses to determine its method of moving through 
the maze. Understanding how each ghost behaves is extremely important to
 be able to effectively avoid them. However, before discussing their 
individual behaviors, let’s first examine the logic that they share.</p>

<h3>The Ghost House</h3>

<p>When a player begins a game of Pac-Man, they are not immediately 
attacked by all four of the ghosts. As shown on the diagram of the 
initial game position, only one ghost begins in the actual maze, while 
the others are inside a small area in the middle of the maze, often 
referred to as the “ghost house”. Other than at the beginning of a 
level, the ghosts will only return to this area if they are eaten by an 
energized Pac-Man, or as a result of their positions being reset when 
Pac-Man dies. The ghost house is otherwise inaccessible, and is not a 
valid area for Pac-Man or the ghosts to move into. Ghosts always move to
 the left as soon as they leave the ghost house, but they may reverse 
direction almost immediately due to an effect that will be described 
later.</p>

<p>The conditions that determine when the three ghosts that start inside
 the ghost house are able to leave it are actually fairly complex. 
Because of this, I’m going to consider them outside the scope of this 
article, especially since they become much less relevant after 
completing the first few levels. If you’re interested in reading about 
these rules (and an interesting exploit of them), the Pac-Man Dossier <a href="http://home.comcast.net/%7Ejpittman2/pacman/pacmandossier.html#CH2%20-%20Home%20Sweet%20Home" target="_blank">covers them in-depth</a>, as always.</p>

<h3>Target Tiles</h3>

<img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/tiled-playfield.png"><p>Much
 of Pac-Man’s design and mechanics revolve around the idea of the board 
being split into tiles. “Tile” in this context refers to an 8 x 8 pixel 
square on the screen. Pac-Man’s screen resolution is 224 x 288, so this 
gives us a total board size of 28 x 36 tiles, though most of these are 
not accessible to Pac-Man or the ghosts. As an example of the impact of 
tiles, a ghost is considered to have caught Pac-Man when it occupies the
 same tile as him. In addition, every pellet in the maze is in the 
center of its own tile. It should be noted that since the sprites for 
Pac-Man and the ghosts are larger than one tile in size, they are never 
completely contained in a single tile. Due to this, for the game’s 
purposes, the character is considered to occupy whichever tile contains 
its <em>center point</em>. This is important knowledge when avoiding 
ghosts, since Pac-Man will only be caught if a ghost manages to move its
 center point into the same tile as Pac-Man’s.</p>

<p>The key to understanding ghost behavior is the concept of a target 
tile. The large majority of the time, each ghost has a specific tile 
that it is trying to reach, and its behavior revolves around trying to 
get to that tile from its current one. All of the ghosts use identical 
methods to travel towards their targets, but the different ghost 
personalities come about due to the individual way each ghost has of 
selecting its target tile. Note that there are no restrictions that a 
target tile must actually be possible to reach, they can (and often are)
 located on an inaccessible tile, and many of the common ghost behaviors
 are a direct result of this possibility. Target tiles will be discussed
 in more detail in upcoming sections, but for now just keep in mind that
 the ghosts are almost always motivated by trying to reach a particular 
tile.</p>

<h3>Ghost Movement Modes</h3>

<p>The ghosts are always in one of three possible modes: Chase, Scatter,
 or Frightened. The “normal” mode with the ghosts pursuing Pac-Man is 
Chase, and this is the one that they spend most of their time in. While 
in Chase mode, all of the ghosts use Pac-Man’s position as a factor in 
selecting their target tile, though it is more significant to some 
ghosts than others. In Scatter mode, each ghost has a fixed target tile,
 each of which is located just outside a different corner of the maze. 
This causes the four ghosts to disperse to the corners whenever they are
 in this mode. Frightened mode is unique because the ghosts do not have a
 specific target tile while in this mode. Instead, they <a href="http://en.wikipedia.org/wiki/Pseudorandom_number_generator" target="_blank">pseudorandomly</a>
 decide which turns to make at every intersection. A ghost in Frightened
 mode also turns dark blue, moves much more slowly and can be eaten by 
Pac-Man. However, the duration of Frightened mode is shortened as the 
player progresses through the levels, and is completely eliminated from 
level 19 onwards.</p>

<blockquote>
“To give the game some tension, I wanted the monsters to surround Pac 
Man at some stage of the game. But I felt it would be too stressful for a
 human being like Pac Man to be continually surrounded and hunted down. 
So I created the monsters’ invasions to come in waves. They’d attack and
 then they’d retreat. As time went by they would regroup, attack, and 
disperse again. It seemed more natural than having constant attack.”
<div class="quote-source">- Toru Iwatani, Pac-Man creator</div>
</blockquote>

<p>Changes between Chase and Scatter modes occur on a fixed timer, which
 causes the “wave” effect described by Iwatani. This timer is reset at 
the beginning of each level and whenever a life is lost. The timer is 
also paused while the ghosts are in Frightened mode, which occurs 
whenever Pac-Man eats an energizer. When Frightened mode ends, the 
ghosts return to their previous mode, and the timer resumes where it 
left off. The ghosts start out in Scatter mode, and there are four waves
 of Scatter/Chase alternation defined, after which the ghosts will 
remain in Chase mode indefinitely (until the timer is reset). For the 
first level, the durations of these phases are:</p>

<ol><li>Scatter for 7 seconds, then Chase for 20 seconds.</li>
    <li>Scatter for 7 seconds, then Chase for 20 seconds.</li>
    <li>Scatter for 5 seconds, then Chase for 20 seconds.</li>
    <li>Scatter for 5 seconds, then switch to Chase mode permanently.</li>
</ol><p>The durations of these phases are changed somewhat when the 
player reaches level 2, and once again when they reach level 5. Starting
 on level 2, the third Chase mode lengthens considerably, to 1033 
seconds (17 minutes and 13 seconds), and the following Scatter mode 
lasts just 1/60 of a second before the ghosts proceed to their permanent
 Chase mode. The level 5 changes build on top of this, additionally 
reducing the first two Scatter lengths to 5 seconds, and adding the 4 
seconds gained here to the third Chase mode, lengthening it to 1037 
seconds (17:17). Regarding the 1/60-of-a-second Scatter mode on every 
level except the first, even though it may seem that switching modes for
 such an insignificant amount of time is pointless, there is a reason 
behind it, which shall be revealed shortly.</p>

<h3>Basic Ghost Movement Rules</h3>

<p>The next step is understanding exactly <em>how</em> the ghosts 
attempt to reach their target tiles. The ghosts’ AI is very simple and 
short-sighted, which makes the complex behavior of the ghosts even more 
impressive. Ghosts only ever plan one step into the future as they move 
about the maze. Whenever a ghost enters a new tile, it looks ahead to 
the next tile that it will reach, and makes a decision about which 
direction it will turn when it gets there. These decisions have one very
 important restriction, which is that ghosts may never choose to reverse
 their direction of travel. That is, a ghost cannot enter a tile from 
the left side and then decide to reverse direction and move back to the 
left. The implication of this restriction is that whenever a ghost 
enters a tile with only two exits, it will always continue in the same 
direction.</p>

<p>However, there is one exception to this rule, which is that whenever 
ghosts change from Chase or Scatter to any other mode, they are <em>forced</em>
 to reverse direction as soon as they enter the next tile. This forced 
instruction will overwrite whatever decision the ghosts had previously 
made about the direction to move when they reach that tile. This 
effectively acts as a notifier to the player that the ghosts have 
changed modes, since it is the only time a ghost can possibly reverse 
direction. Note that when the ghosts leave Frightened mode they do not 
change direction, but this particular switch is already obvious due to 
the ghosts reverting to their regular colors from the dark blue of 
Frightened. So then, the 1/60-of-a-second Scatter mode on every level 
after the first will cause all the ghosts to reverse their direction of 
travel, even though their target effectively remains the same. This 
forced direction-reversal instruction is also applied to any ghosts 
still inside the ghost house, so a ghost that hasn’t yet entered the 
maze by the time the first mode switch occurs will exit the ghost house 
with a “reverse direction as soon as you can” instruction already 
pending. This causes them to move left as usual for a very short time, 
but they will almost immediately reverse direction and go to the right 
instead.</p>

<img class="center" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/intersection-map.png"><p>The
 diagram above shows a simplified representation of the maze layout. 
Decisions are only necessary at all when approaching “intersection” 
tiles, which are indicated in green on the diagram.</p>

<img class="left" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/decision.png"><p>When
 a decision about which direction to turn is necessary, the choice is 
made based on which tile adjoining the intersection will put the ghost 
nearest to its target tile, measured in a straight line. The distance 
from every possibility to the target tile is measured, and whichever 
tile is closest to the target will be selected. In the diagram to the 
left, the ghost will turn upwards at the intersection. If two or more 
potential choices are an equal distance from the target, the decision 
between them is made in the order of up &gt; left &gt; down. A decision 
to exit right can never be made in a situation where two tiles are 
equidistant to the target, since any other option has a higher priority.</p>

<img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/bad-decision.png"><p>Since
 the only consideration is which tile will immediately place the ghost 
closer to its target, this can result in the ghosts selecting the 
“wrong” turn when the initial choice places them closer, but the overall
 path is longer. An example is shown to the right, where straight-line 
measurement makes exiting left appear to be a better choice. However, 
this will result in an overall path length of 26 tiles to reach the 
target, when exiting right would have had a path only 8 tiles long.</p> 

<p>One final special case to be aware of are the four intersections that
 were colored yellow on the simplified maze diagram. These specific 
intersections have an extra restriction — ghosts can not choose to turn 
upwards from these tiles. If entering them from the right or left side 
they will always proceed out the opposite side (excepting a forced 
direction-reversal). Note that this restriction does not apply to 
Frightened mode, and Frightened ghosts may turn upwards here if that 
decision occurs randomly. A ghost entering these tiles from the top can 
also reverse direction back out the top if a mode switch occurs as they 
are entering the tile, the restriction is only applied during “regular” 
decision-making. If Pac-Man is being pursued closely by ghosts, he can 
gain some ground on them by making an upwards turn in one of these 
intersections, since they will be forced to take a longer route around.</p>

<h2>Individual Ghost Personalities</h2>

<blockquote>
“This is the heart of the game. I wanted each ghostly enemy to have a 
specific character and its own particular movements, so they weren’t all
 just chasing after Pac Man in single file, which would have been 
tiresome and flat.” 
<div class="quote-source">- Toru Iwatani, Pac-Man creator</div>
</blockquote>

<img class="center" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/ghost-names.png"><p>As
 has been previously mentioned, the only differences between the ghosts 
are their methods of selecting target tiles in Chase and Scatter modes. 
The only official description of each ghost’s personality comes from the
 one-word “character” description shown in the game’s attract mode. 
We’ll first take a look at how the ghosts behave in Scatter mode, since 
it’s extremely straightforward, and then look at each ghost’s approach 
to targeting in Chase mode.</p>

<h3>Scatter Mode</h3>

<img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/scatter-targets.png"><p>Each
 ghost has a pre-defined, fixed target tile while in this mode, located 
just outside the corners of the maze. When Scatter mode begins, each 
ghost will head towards their “home” corner using their regular 
path-finding methods. However, since the actual target tiles are 
inaccessible and the ghosts cannot stop moving or reverse direction, 
they are forced to continue past the target, but will turn back towards 
it as soon as possible. This results in each ghost’s path eventually 
becoming a fixed loop in their corner. If left in Scatter mode, each 
ghost would remain in its loop indefinitely. In practice, the duration 
of Scatter mode is always quite short, so the ghosts often do not have 
time to even reach their corner or complete a circuit of their loop 
before reverting back to Chase mode. The diagram shows each ghost’s 
target tile and eventual looping path, color-coded to match their own 
color.</p>

<h3>The Red Ghost</h3>

<img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/blinky-targeting.png"><p>The
 red ghost starts outside of the ghost house, and is usually the first 
one to be seen as a threat, since he makes a beeline for Pac-Man almost 
immediately. He is referred to as “Blinky”, and the game describes his 
personality as <em>shadow</em>. In Japanese, his personality is referred to as 追いかけ, <em>oikake</em>,
 which translates as “pursuer” or “chaser”. Both languages’ descriptions
 are accurate, since Blinky’s target tile in Chase mode is defined as 
Pac-Man’s current tile. This ensures that Blinky almost always follows 
directly behind Pac-Man, unless the short-sighted decision-making causes
 him to take an inefficient path.</p>

<p>Even though Blinky’s targeting method is very simple, he does have 
one idiosyncrasy that the other ghosts do not; at two defined points in 
each level (based on the number of dots remaining), his speed increases 
by 5% and his behavior in Scatter mode changes. The timing of the speed 
change varies based on the level, with the change occurring earlier and 
earlier as the player progresses. The change to Scatter targeting is 
perhaps more significant than the speed increases, since it causes 
Blinky’s target tile to remain as Pac-Man’s position even while in 
Scatter mode, instead of his regular fixed tile in the upper-right 
corner. This effectively keeps Blinky in Chase mode permanently, though 
he will still be forced to reverse direction as a result of a mode 
switch. When in this enhanced state, Blinky is generally referred to as 
“Cruise Elroy”, though the origin of this term seems to be unknown. Not 
even the almighty Pac-Man Dossier has an answer here. If Pac-Man dies 
while Blinky is in Cruise Elroy mode, he reverts back to normal behavior
 temporarily, but returns to Elroy mode as soon as all other ghosts have
 exited the ghost house.</p>

<h3>The Pink Ghost</h3>

<img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/pinky-targeting.png"><img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/pinky-targeting2.png"><p>The
 pink ghost starts inside the ghost house, but always exits immediately,
 even in the first level. His nickname is “Pinky”, and his personality 
is described as <em>speedy</em>. This is a considerable departure from his Japanese personality description, which is 待ち伏せ, <em>machibuse</em>,
 which translates as “ambusher”. The Japanese version is much more 
appropriate, since Pinky does not move faster than any of the other 
ghosts (and slower than Blinky in Cruise Elroy mode), but his targeting 
scheme attempts to move him to the place where Pac-Man is going, instead
 of where he currently is. Pinky’s target tile in Chase mode is 
determined by looking at Pac-Man’s current position and orientation, and
 selecting the location four tiles straight ahead of Pac-Man. At least, 
this was the intention, and it works when Pac-Man is facing to the left,
 down, or right, but when Pac-Man is facing upwards, an <a href="http://en.wikipedia.org/wiki/Arithmetic_overflow" target="_blank">overflow error</a> in the game’s code causes Pinky’s target tile to actually be set as four tiles ahead of Pac-Man <em>and</em>
 four tiles to the left of him. I don’t wish to frighten off 
non-programmers, but if you’re interested in the technical details 
behind this bug, <a href="http://donhodges.com/pacman_pinky_explanation.htm" target="_blank">Don Hodges has written a great explanation</a> (<a href="http://webcache.googleusercontent.com/search?hl=en&amp;client=firefox-a&amp;hs=c3M&amp;gl=us&amp;q=cache%3Awww.donhodges.com%2Fpacman_pinky_explanation.htm&amp;btnG=Search" target="_blank">Google cache link</a>,
 since the traffic keeps killing his server), including the actual 
assembly code for Pinky’s targeting, as well as a fixed version.</p>

<img class="left" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/pinky-chicken.png"><p>One
 important implication of Pinky’s targeting method is that Pac-Man can 
often win a game of “chicken” with him. Since his target tile is set 
four tiles in front of Pac-Man, if Pac-Man heads directly towards him, 
Pinky’s target tile will actually be <em>behind</em> himself once they 
are less than four tiles apart. This will cause Pinky to choose to take 
any available turn-off in order to loop back around to his target. 
Because of this, it is a common strategy to momentarily “fake” back 
towards Pinky if he starts following closely. This will often send him 
off in an entirely different direction.</p>

<h3>The Blue Ghost</h3>

<img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/inky-targeting.png"><p>The
 blue ghost is nicknamed Inky, and remains inside the ghost house for a 
short time on the first level, not joining the chase until Pac-Man has 
managed to consume at least 30 of the dots. His English personality 
description is <em>bashful</em>, while in Japanese he is referred to as 気紛れ, <em>kimagure</em>,
 or “whimsical”. Inky is difficult to predict, because he is the only 
one of the ghosts that uses a factor other than Pac-Man’s 
position/orientation when determining his target tile. Inky actually 
uses both Pac-Man’s position/facing as well as Blinky’s (the red 
ghost’s) position in his calculation. To locate Inky’s target, we first 
start by selecting the position two tiles in front of Pac-Man in his 
current direction of travel, similar to Pinky’s targeting method. From 
there, imagine drawing a vector from Blinky’s position to this tile, and
 then doubling the length of the vector. The tile that this new, 
extended vector ends on will be Inky’s actual target.</p>

<p>As a result, Inky’s target can vary wildly when Blinky is not near 
Pac-Man, but if Blinky is in close pursuit, Inky generally will be as 
well. Note that Inky’s “two tiles in front of Pac-Man” calculation 
suffers from exactly the same overflow error as Pinky’s four-tile 
equivalent, so if Pac-Man is heading upwards, the endpoint of the 
initial vector from Blinky (before doubling) will actually be two tiles 
up and two tiles left of Pac-Man.</p>

<h3>The Orange Ghost</h3>

<img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/clyde-targeting2.png"><img class="right" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/clyde-targeting.png"><p>The
 orange ghost, “Clyde”, is the last to leave the ghost house, and does 
not exit at all in the first level until over a third of the dots have 
been eaten. Clyde’s English personality description is <em>pokey</em>, whereas the Japanese description is お惚け, <em>otoboke</em>
 or “feigning ignorance”. As is typical, the Japanese version is more 
accurate, since Clyde’s targeting method can give the impression that he
 is just “doing his own thing”, without concerning himself with Pac-Man 
at all. The unique feature of Clyde’s targeting is that it has two 
separate modes which he constantly switches back and forth between, 
based on his proximity to Pac-Man. Whenever Clyde needs to determine his
 target tile, he first calculates his distance from Pac-Man. If he is <em>farther</em>
 than eight tiles away, his targeting is identical to Blinky’s, using 
Pac-Man’s current tile as his target. However, as soon as his distance 
to Pac-Man becomes <em>less</em> than eight tiles, Clyde’s target is set
 to the same tile as his fixed one in Scatter mode, just outside the 
bottom-left corner of the maze.</p>

<img class="center" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/clyde-targeting3.png"><p>The
 combination of these two methods has the overall effect of Clyde 
alternating between coming directly towards Pac-Man, and then changing 
his mind and heading back to his corner whenever he gets too close. On 
the diagram above, the X marks on the path represent the points where 
Clyde’s mode switches. If Pac-Man somehow managed to remain stationary 
in that position, Clyde would indefinitely loop around that T-shaped 
area. As long as the player is not in the lower-left corner of the maze,
 Clyde can be avoided completely by simply ensuring that you do not 
block his “escape route” back to his corner. While Pac-Man is within 
eight tiles of the lower-left corner, Clyde’s path will end up in 
exactly the same loop as he would eventually maintain in Scatter mode.</p>

<h2>Wrapping Up</h2>

<p>If you’ve made it this far, you should now have a fairly complete 
understanding of the logic behind Pac-Man’s ghost movement. 
Understanding the ghosts’ behavior is probably the single most important
 step towards becoming a skilled Pac-Man player, and even a general idea
 of where they are likely to move next should greatly improve your 
abilities. I’ve never been good at Pac-Man, but while I was researching 
this article and testing a few things, I found that I was able to avoid 
the ghosts much more easily than before. Even small things make a huge 
difference, such as recognizing a switch to Scatter mode and knowing 
that you have a few seconds where the ghosts won’t (deliberately) try to
 kill you.</p>

<p>Pac-Man is an amazing example of seemingly-complex behavior arising 
from only a few cleverly-designed rules, with the result being a deep 
and challenging game that players still strive to master, 30 years after
 its release.</p>

<h2>Sources</h2>
<ul><li><a href="http://home.comcast.net/%7Ejpittman2/pacman/pacmandossier.html" target="_blank">The Pac-Man Dossier</a>,
 Jamey Pittman - practically the only source you need for anything 
related to Pac-Man. I did some original research to confirm a few 
statements here and there, but honestly, most of this article is just 
rearranged and reworded from Jamey’s amazing work on the Dossier. Highly
 recommended reading if you enjoyed this article and would like to learn
 about the other aspects of the game.</li>
    <li><a href="http://donhodges.com/pacman_pinky_explanation.htm" target="_blank">Pac-Man’s Ghost Behaviour Analyzed and Fixed</a>, Don Hodges - explanation of Pinky and Inky’s targeting bug and some of the relevant Z80 assembly code.</li>
    <li>All Toru Iwatani quotes come from an interview in <em>Programmers at Work</em> by Susan M. Lammers. The entire interview is available online at <a href="http://pacmanmuseum.com/history/Toru-atwork.php" target="_blank">Pac-Man Museum</a>.</li>
</ul>
</div>





<div id="footer">
    <div class="next"><a href="http://gameinternals.com/post/3364162387">Newer Post &gt;&gt;</a></div>
    
</div>


<!-- BEGIN TUMBLR CODE --><iframe src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/analytics.html" style="background-color:transparent; overflow:hidden; position:absolute; top:0; left:0; z-index:9999;" id="ga_target" frameborder="0" height="1" scrolling="no" width="1"></iframe><script type="text/javascript">
    (function(){
        var analytics_frame = document.getElementById('ga_target');
        var analytics_iframe_loaded;
        var user_logged_in;
        var blog_is_nsfw = 'No';

        var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
        var eventer = window[eventMethod];
        var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";
        eventer(messageEvent,function(e) {
            var message = (e.data && e.data.split) ? e.data.split(';') : '';
            switch (message[0]) {
                case 'analytics_iframe_loaded':
                    analytics_iframe_loaded = true;
                    postCSMessage();
                    postGAMessage();
                    break;
                case 'user_logged_in':
                    user_logged_in = message[1];
                    postGAMessage();
                    break;
            }
        }, false);

        analytics_frame.src = "http://assets.tumblr.com/analytics.html?dc636e9b34dfd27b194aed14513506cb#http://gameinternals.com";
        function postGAMessage() {
            if (analytics_iframe_loaded && user_logged_in) {
                var is_ajax = false;
                analytics_frame.contentWindow.postMessage(['tick_google_analytics', is_ajax, user_logged_in, blog_is_nsfw, '/post/2072558330/understanding-pac-man-ghost-behavior?route=%2Fpost%2F%3Aid%2F%3Asummary'].join(';'), analytics_frame.src.split('/analytics.html')[0]);
            }
        }
        function postCSMessage() {
            COMSCORE = true;
            analytics_frame.contentWindow.postMessage('enable_comscore;' + window.location, analytics_frame.src.split('/analytics.html')[0]);
        }
    })();
</script><script>
            var _qevents = _qevents || [];
            (function() {
                var s = document.createElement('script');
                var el = document.getElementsByTagName('script')[0];
                s.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
                el.parentNode.insertBefore(s, el);
            })();
        </script><script type="text/javascript">
            _qevents.push( { qacct: 'p-19UtqE8ngoZbM' } );
        </script><noscript><div style="display: none;"><img src="//pixel.quantserve.com/pixel/'p-19UtqE8ngoZbM'.gif" height="1" width="1" alt="Quantcast"/></div></noscript><script type="text/javascript">!function(s){s.src='http://www.tumblr.com/impixu?T=1398934893&J=eyJ0eXBlIjoidXJsIiwidXJsIjoiaHR0cDpcL1wvZ2FtZWludGVybmFscy5jb21cL3Bvc3RcLzIwNzI1NTgzMzBcL3VuZGVyc3RhbmRpbmctcGFjLW1hbi1naG9zdC1iZWhhdmlvciIsInJlcXR5cGUiOjAsInJvdXRlIjoiXC9wb3N0XC86aWRcLzpzdW1tYXJ5In0=&U=MLIFPOFFJD&K=9ae02c75af879acda68c697065cb1cf16d4d1c0ec5ba430265bc7fc24924ae2a&R='.replace(/&R=[^&$]*/,'').concat('&R='+escape(document.referrer)).slice(0,2000).replace(/%.?.?$/,'');}(new Image());</script><noscript><img style="position:absolute;z-index:-3334;top:0px;left:0px;visibility:hidden;" src="http://www.tumblr.com/impixu?T=1398934893&J=eyJ0eXBlIjoidXJsIiwidXJsIjoiaHR0cDpcL1wvZ2FtZWludGVybmFscy5jb21cL3Bvc3RcLzIwNzI1NTgzMzBcL3VuZGVyc3RhbmRpbmctcGFjLW1hbi1naG9zdC1iZWhhdmlvciIsInJlcXR5cGUiOjAsInJvdXRlIjoiXC9wb3N0XC86aWRcLzpzdW1tYXJ5Iiwibm9zY3JpcHQiOjF9&U=MLIFPOFFJD&K=8152a0700e604f0395ba1fae11dd00844c91ebdf75a9f21cf87e24c6f0001872&R="></noscript><script type="text/javascript">!function(s){s.src='http://www.tumblr.com/impixu?T=1398934893&J=eyJ0eXBlIjoicG9zdCIsInVybCI6Imh0dHA6XC9cL2dhbWVpbnRlcm5hbHMuY29tXC9wb3N0XC8yMDcyNTU4MzMwXC91bmRlcnN0YW5kaW5nLXBhYy1tYW4tZ2hvc3QtYmVoYXZpb3IiLCJyZXF0eXBlIjowLCJyb3V0ZSI6IlwvcG9zdFwvOmlkXC86c3VtbWFyeSIsInBvc3RzIjpbeyJwb3N0aWQiOiIyMDcyNTU4MzMwIiwiYmxvZ2lkIjoiODI3NjY2OCIsInNvdXJjZSI6MzN9XX0=&U=OCNOGLODPL&K=5de6acba8aa5ff78566d2d20ef03b2b4f6105d0d209c42eae2185a6865217113&R='.replace(/&R=[^&$]*/,'').concat('&R='+escape(document.referrer)).slice(0,2000).replace(/%.?.?$/,'');}(new Image());</script><noscript><img style="position:absolute;z-index:-3334;top:0px;left:0px;visibility:hidden;" src="http://www.tumblr.com/impixu?T=1398934893&J=eyJ0eXBlIjoicG9zdCIsInVybCI6Imh0dHA6XC9cL2dhbWVpbnRlcm5hbHMuY29tXC9wb3N0XC8yMDcyNTU4MzMwXC91bmRlcnN0YW5kaW5nLXBhYy1tYW4tZ2hvc3QtYmVoYXZpb3IiLCJyZXF0eXBlIjowLCJyb3V0ZSI6IlwvcG9zdFwvOmlkXC86c3VtbWFyeSIsInBvc3RzIjpbeyJwb3N0aWQiOiIyMDcyNTU4MzMwIiwiYmxvZ2lkIjoiODI3NjY2OCIsInNvdXJjZSI6MzN9XSwibm9zY3JpcHQiOjF9&U=OCNOGLODPL&K=674869d725ccc9abf137ad7ecec2a654cee3dccdb5e19fb4177045b586b9d29b&R="></noscript><script>
                (function() {
                    var s = document.createElement('script');
                    var el = document.getElementsByTagName('script')[0];
                    s.src = ('https:' == document.location.protocol ? 'https://s' : 'http://l') + '.yimg.com/ss/rapid-3.14.js';
                    s.onload = function(){
                        var YAHOO = window.YAHOO;
                        if (YAHOO) {
                            YAHOO.i13n.beacon_server = 'nol.yahoo.com';
                            var keys = { pd:'/post/:id/:summary', _li:0, i_rad:0, i_strm:0, b_id:8276668 };
                            var conf = {
                                                                spaceid:1197719230,
                                client_only:1,
                                yql_enabled:false,
                                keys:keys
                            }
                            YAHOO.rapid = new YAHOO.i13n.Rapid(conf);
                        }
                    }
                    el.parentNode.insertBefore(s, el);
                })();
            </script><iframe style="display: none;" id="tumblr_controls" class="tumblr_controls sticky visible" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/o.html" frameborder="0" height="36" scrolling="no" width="328"></iframe><div id="teaser_iframe_container" style="display: block; opacity: 0; visibility: hidden; position: fixed; top: 0px; right: 0px; bottom: 0px; width: 1px; height: 100%; z-index: 2147483646; overflow: hidden; background-color: rgba(0, 0, 0, 0.6); transition: width 0.25s ease-in-out 0s;"><iframe style="display: block; opacity: 1; visibility: visible; position: absolute; top: 0px; right: 0px; min-width: 100%; width: 360px; height: 100%;" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/teaser.html" id="teaser_iframe" frameborder="0" height="1" scrolling="no" width="1"></iframe></div><script type="text/javascript">
    (function(Tumblr){
        var follow_iframe_initialized = false;
        if (Tumblr.FollowTeaser && Tumblr.PostMessageListener) {
            // Don't do anything until the first initialize event
            Tumblr.PostMessageListener.initialize(function(message, origin) {
                if (follow_iframe_initialized || message.length < 2) return;

                if (message[0] === 'follow_iframe' && message[1] === 'enable') {
                    Tumblr.FollowTeaser.current_page = 1;
                    Tumblr.FollowTeaser.infer_infinite_scroll = true;
                    Tumblr.FollowTeaser.create_from_tumblr_controls("http:\/\/assets.tumblr.com\/assets\/html\/iframe\/follow.html?_v=4060c716210bf1a77b21ccbefe4c8b61");
                    Tumblr.FollowTeaser.scroll_listener(true);
                    follow_iframe_initialized = true;
                }
            });
        }
    })(this.Tumblr || (this.Tumblr = {}));
</script><!--[if IE]><script type="text/javascript">document.getElementById('tumblr_controls').allowTransparency=true;</script><![endif]--><!-- END TUMBLR CODE -->


</div><iframe class=" open" src="GameInternals%20-%20Understanding%20Pac-Man%20Ghost%20Behavior_files/follow.html" id="tumblr_teaser_follow" frameborder="0" height="1" scrolling="no" width="1"></iframe></body></html>